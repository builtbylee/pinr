appId: com.builtbylee.app80days
onFlowStart:
  - runFlow:
      when:
        visible: "Allow Pinr to send you notifications?"
      commands:
        - tapOn: "Allow"
  - runFlow:
      when:
        visible: "Allow Pinr to access this deviceâ€™s location?"
      commands:
        - tapOn: "While using the app"
  - runFlow:
      when:
        visible: "Allow Pinr to access your photos?"
      commands:
        - tapOn: "Allow"
---
- launchApp:
    clearState: true

# Handle Expo Go / Dev Client Server Selection
- runFlow:
    when:
      visible: "Development servers"
    commands:
      - tapOn: "http://10.0.2.2:8081"

# Handle 'Connected to' info screen
- runFlow:
    when:
      visible: "Connected to"
    commands:
      - tapOn:
          point: "90%,15%" # Approximate location of X button on the card

# Wait for potential Dev Menu overlay
- swipe:
    start: "50%,50%"
    end: "50%,50%"
    duration: 8000
- runFlow:
    when:
      visible: "Continue"
    commands:
      - tapOn: "Continue"

# 1. Handle Onboarding / Login
- tapOn:
    id: "auth-email-input"
- inputText: "testuser" # Use a test account
- tapOn:
    id: "auth-password-input"
- inputText: "password123"
- tapOn:
    id: "auth-submit-button"

# 2. Verify Home Screen (Map) Loads
# 2. Verify Home Screen (Map) Loads
- tapOn:
    id: "fab-search-button"
- assertVisible:
    id: "explore-search-input"
- tapOn: "Cancel"
- tapOn:
    id: "fab-profile-button"
- assertVisible: "Explore Streak"
- tapOn:
    id: "profile-close-button"
